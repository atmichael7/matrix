#include <iostream>
#include <Windows.h>
#include <stdlib.h>
using namespace std; 

// by Mike B
/*
ERROR CODES
1a - in the first phase, generating matrix, user failed to enter 1 or 2 (choosing between making their own matrix or creating a random one)
      within 10 attempts. This can be in less attempts if user enters spaces between chars in the string. For example "sdw sdf" counts as two
      for loop iterations i=1 'sdw' and i=2 'sdf'. Also the user cannot type the number out with letters (Example "two" or "Two"). Thus,
      any input that is not '1' or '2' will not work. 

1b - in the second phase, choosing number of columns and rows, user failed to enter a valid integer that is greater than zero. The user cannot
      type out the number with chars (Example "two" or "Two"). The number must be greater than zero because there cannot sike u thought

*/

void generateMatrix();  // predefine the function




int main(){
    cout << "Matrix Manipulation";      // describe the purpose of the program
    generateMatrix();                   // first order of business, generate the matrix
}

void notifyError(string code){          // error notification function
    cout << "\n \n"             
        << " >>>> Error!"               // announce error
        << "\n >>>> Code: " << code     // error code, passed by specific parts of functions that failed (better debugging)
        << "\n >>>> Exiting program.";  // announce exit
    exit(0);                            // exit code zero
}

bool isNumber(const string& str)        // function that checks if string is a number (typing "six" doesn't work, but "6" does)
{
    for (char const &c : str) {                 
        if (std::isdigit(c) == 0) return false;
    }
    return true;
}

void generateMatrix(){      // Matrix generation function
    bool flag;              // flag variable is true when user doesn't input 1 or 2 for userResponse, which notifies them of invalid input
    int flow;               // determined by user response 1 or 2, after the first for lopp
    string userResponse;    // the input variable that will determine if matrix is custom or random
    for (int i = 0; i<=12; i++){        // for loop giving user multiple attempts to simply enter a 1 or 2 for userResponse variable 
        if (flag)                       // flag is true when the user doesn't enter a 1 or 2 in userResponse field, notifying user of their invalid input
            cout << " >>> Invalid response! (Type 1 or 2)\n \n";    
  
        cout << " >>> Generate Matrix\n"
            << " [1] Create custom\n"
            << " [2] Create random\n"
            << " Response: ";
           
        cin >> userResponse;
        if (userResponse == "1"){       // user typed 1 to generate custom matrix
            flow = 1;                   // flow set to 1, value is used in the next step (after this loop is broken)
            break;                      // break the loop to move onto the next step
        }
        else if (userResponse == "2"){  // user typed 2 to generate random matrix
            flow = 2;                   // flow set to 2, value is used in the next step (after this loop is broken)
            break;                      // break the loop to move onto the next step
        }
        else{                           // if input is invalid, set flag true to notify user of incorrect input
            flag = true;                // next loop will show flag message saying to type 1 or 2 
            system("CLS");
        }  

        if (i >= 11)
            notifyError("1a");  // if the for loop exceeds 10, terminate program  
    }

    if (userResponse != "1" && userResponse != "2")
        notifyError("1a");  // if the user manages to escape the for loop without appropriate input, try to catch them
    
    
    // get desired dimensions from user
    flag = false;                           // reset the flag variable for reuse
    string numcols = "", numrows = "";      // string inputs for cols and rows
    int ncols, nrows;                       // int cols and rows that the string inputs will be converted into
    for (int i = 0; i <= 12; i++){          // loop that will prompt inputs for cols and rows
        if (flag)                           // check flag (user entered incorrect input [either zero or non integer input for either col or row])
            cout << " >>>> Invalid input, first enter # of columns, then enter # of rows, # must be greater than zero\n \n";
        
        cout << "\nSetting the dimensions, number must be greater than 0\n"
             << "# of cols: ";      // prompt for number of columns

        cin >> numcols;     // user inputs number of columns (will be converted into the ncols int variable)

        cout << "# of rows: ";      // prompt for number of rows
        cin >> numrows;     // user inputs number of rows (will be converted into the nrows int variable)

        if (isNumber(numcols) && isNumber(numrows)){        // if the inputted strings are numbers, do the next line
            ncols = stoi(numcols), nrows = stoi(numrows);   // convert the inputted strings into integers 
            if (ncols == 0 || nrows == 0){                  // check if either converted inputs are == 0
                // treat as invalid input (neither cols or rows can be zero)
                flag = true;
                system("CLS");
            }
            else{                                               // if converted inputs != 0 then proceed with confirming inputs
                cout << "\n Number of columns = " << numcols    // confirm number of colums
                    << "\n Number of rows = " << numrows;       // confirm number of rows as well
                break;                                          // BREAK out of for loop since inputs check out
            }
        }
        else{                   // else, the string inputs != number then flag and go back to top of loop
            flag = true;        // the flag will indicate that the previous input was invalid 
            system("CLS");      // clear the screen to not get things too messy
        }
        if (i >= 11)            // if the user manages to not enter valid numbers for cols and rows then notify of error
            notifyError("1b");  // error 1b, described in error codes
    }
    if (!isNumber(numcols) || !isNumber(numrows) || (ncols == 0 && nrows == 0))     // try to catch any exceptions where user entered valid input, but managed to proceed past function
        notifyError("1b");                                                          // send error message through the function above


    if (flow == 1){
        cout << "flow1";
    }
    else if (flow == 2){
        cout << "flow2";
    }
    else{
        notifyError("1c");
    }
}


// stopped at the num rows and cols, so now move onto phase 3 
// flow 1 is creating custom matrix 
